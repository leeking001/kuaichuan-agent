<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>å¿«ä¼ å· Agent ç‰ˆ - æ™ºèƒ½å·¥ä½œå°</title>
    <!-- å¼•å…¥å›¾æ ‡åº“ -->
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" rel="stylesheet">
    <style>
        :root {
            --primary-color: #0052D9; /* ç§‘æŠ€è“ */
            --primary-light: #E5F0FF;
            --secondary-color: #00A870; /* æˆåŠŸç»¿ */
            --bg-color: #F2F3F5;
            --card-bg: #FFFFFF;
            --text-main: #1D2129;
            --text-sub: #86909C;
            --border-color: #E5E6EB;
            --shadow: 0 4px 10px rgba(0, 0, 0, 0.05);
            --radius: 12px;
        }

        * {
            box-sizing: border-box;
            margin: 0;
            padding: 0;
            font-family: 'PingFang SC', 'Microsoft YaHei', sans-serif;
        }

        body {
            background-color: var(--bg-color);
            color: var(--text-main);
            height: 100vh;
            display: flex;
            overflow: hidden;
        }

        /* å·¦ä¾§å¯¼èˆªæ  */
        .sidebar {
            width: 240px;
            background: var(--card-bg);
            border-right: 1px solid var(--border-color);
            display: flex;
            flex-direction: column;
            padding: 20px;
            z-index: 10;
        }

        .logo {
            font-size: 20px;
            font-weight: bold;
            color: var(--primary-color);
            margin-bottom: 40px;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .nav-item {
            padding: 12px 16px;
            margin-bottom: 8px;
            border-radius: 8px;
            cursor: pointer;
            color: var(--text-sub);
            display: flex;
            align-items: center;
            gap: 12px;
            transition: all 0.3s;
        }

        .nav-item.active, .nav-item:hover {
            background-color: var(--primary-light);
            color: var(--primary-color);
            font-weight: 500;
        }

        /* ä¸»å†…å®¹åŒº */
        .main-container {
            flex: 1;
            padding: 24px;
            overflow-y: auto;
            display: grid;
            grid-template-columns: 300px 1fr 320px; /* å·¦ ä¸­ å³ å¸ƒå±€ */
            grid-template-rows: 100%;
            gap: 24px;
            height: 100%;
        }

        /* é€šç”¨å¡ç‰‡æ ·å¼ */
        .card {
            background: var(--card-bg);
            border-radius: var(--radius);
            box-shadow: var(--shadow);
            padding: 20px;
            display: flex;
            flex-direction: column;
            transition: transform 0.2s;
        }

        .card-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 16px;
        }

        .card-title {
            font-size: 16px;
            font-weight: 600;
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .agent-badge {
            background: linear-gradient(135deg, #0052D9, #00A870);
            color: white;
            font-size: 10px;
            padding: 2px 6px;
            border-radius: 4px;
            font-weight: normal;
        }

        /* --- æ¨¡å—1ï¼šæ¯æ—¥æ’­æŠ¥ Agent (å·¦ä¾§) --- */
        .daily-report-section {
            display: flex;
            flex-direction: column;
            gap: 20px;
        }

        .data-summary {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 12px;
            margin-bottom: 20px;
        }

        .data-item {
            background: #F7F8FA;
            padding: 12px;
            border-radius: 8px;
            text-align: center;
        }

        .data-num {
            font-size: 20px;
            font-weight: bold;
            color: var(--text-main);
            margin: 4px 0;
        }

        .data-label {
            font-size: 12px;
            color: var(--text-sub);
        }

        .trend {
            font-size: 12px;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 4px;
        }

        .trend.up { color: #D03050; } /* çº¢æ¶¨ */
        .trend.down { color: #00A870; } /* ç»¿è·Œ */

        .suggestion-list {
            list-style: none;
        }

        .suggestion-item {
            background: var(--primary-light);
            border-left: 4px solid var(--primary-color);
            padding: 12px;
            border-radius: 4px;
            margin-bottom: 12px;
            font-size: 13px;
            cursor: pointer;
            transition: transform 0.2s;
        }

        .suggestion-item:hover {
            transform: translateX(4px);
        }

        .suggestion-tag {
            font-weight: bold;
            color: var(--primary-color);
            margin-bottom: 4px;
            display: block;
        }

        /* --- æ¨¡å—2ï¼šå†…å®¹åˆ›ä½œ Agent (ä¸­é—´ Cä½) --- */
        .creation-agent-section {
            display: flex;
            flex-direction: column;
            height: 100%;
            position: relative;
        }

        .creation-tabs {
            display: flex;
            gap: 16px;
            margin-bottom: 20px;
            border-bottom: 1px solid var(--border-color);
            padding-bottom: 10px;
        }

        .tab-btn {
            border: none;
            background: none;
            font-size: 16px;
            color: var(--text-sub);
            cursor: pointer;
            padding-bottom: 8px;
            position: relative;
        }

        .tab-btn.active {
            color: var(--primary-color);
            font-weight: 600;
        }

        .tab-btn.active::after {
            content: '';
            position: absolute;
            bottom: -11px;
            left: 0;
            width: 100%;
            height: 2px;
            background: var(--primary-color);
        }

        .chat-interface {
            flex: 1;
            background: #F9FAFB;
            border-radius: 8px;
            padding: 20px;
            overflow-y: auto;
            margin-bottom: 20px;
            border: 1px solid var(--border-color);
        }

        .message {
            margin-bottom: 16px;
            display: flex;
            gap: 12px;
        }

        .message.ai .avatar {
            background: var(--primary-color);
            color: white;
        }

        .message.user {
            flex-direction: row-reverse;
        }

        .message.user .avatar {
            background: #FF9C19;
            color: white;
        }

        .avatar {
            width: 36px;
            height: 36px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 14px;
            flex-shrink: 0;
        }

        .bubble {
            background: white;
            padding: 12px 16px;
            border-radius: 12px;
            border-top-left-radius: 2px;
            box-shadow: 0 2px 4px rgba(0,0,0,0.05);
            max-width: 80%;
            font-size: 14px;
            line-height: 1.6;
        }

        .message.user .bubble {
            background: var(--primary-color);
            color: white;
            border-radius: 12px;
            border-top-right-radius: 2px;
        }

        .input-area {
            background: white;
            border: 1px solid var(--primary-color);
            border-radius: 8px;
            padding: 12px;
            display: flex;
            flex-direction: column;
            gap: 10px;
            box-shadow: 0 0 0 4px rgba(0, 82, 217, 0.1);
        }

        .input-options {
            display: flex;
            gap: 10px;
        }

        .option-chip {
            font-size: 12px;
            padding: 4px 10px;
            background: #F2F3F5;
            border-radius: 12px;
            color: var(--text-sub);
            cursor: pointer;
        }
        
        .option-chip:hover { background: #E5E6EB; }

        textarea {
            width: 100%;
            border: none;
            resize: none;
            outline: none;
            font-size: 14px;
            height: 60px;
        }

        .send-btn {
            align-self: flex-end;
            background: var(--primary-color);
            color: white;
            border: none;
            padding: 8px 20px;
            border-radius: 6px;
            cursor: pointer;
            display: flex;
            align-items: center;
            gap: 6px;
        }

        .send-btn:hover { background-color: #003CAB; }

        /* --- æ¨¡å—3 & 4ï¼šå³ä¾§æ  (è®¤è¯ & å®¢æœ) --- */
        .right-column {
            display: flex;
            flex-direction: column;
            gap: 24px;
        }

        /* è®¤è¯ Agent */
        .auth-card {
            flex: 0 0 auto; /* ä¸ä¼¸ç¼© */
        }

        .auth-status {
            display: flex;
            align-items: center;
            gap: 12px;
            margin-bottom: 16px;
        }

        .status-icon {
            width: 48px;
            height: 48px;
            background: #FFF1F0;
            color: #D03050;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 20px;
        }

        .status-text h4 { font-size: 14px; margin-bottom: 4px; }
        .status-text p { font-size: 12px; color: var(--text-sub); }

        .auth-btn {
            width: 100%;
            padding: 10px;
            background: white;
            border: 1px solid var(--primary-color);
            color: var(--primary-color);
            border-radius: 6px;
            cursor: pointer;
            font-weight: 500;
            transition: all 0.2s;
        }

        .auth-btn:hover {
            background: var(--primary-light);
        }

        /* å®¢æœ Agent */
        .cs-card {
            flex: 1; /* å æ®å‰©ä½™ç©ºé—´ */
            display: flex;
            flex-direction: column;
        }

        .cs-chat-window {
            flex: 1;
            background: #F7F8FA;
            border-radius: 8px;
            padding: 12px;
            overflow-y: auto;
            margin-bottom: 12px;
            font-size: 13px;
        }

        .cs-input-row {
            display: flex;
            gap: 8px;
        }

        .cs-input {
            flex: 1;
            border: 1px solid var(--border-color);
            border-radius: 4px;
            padding: 8px;
            font-size: 12px;
            outline: none;
        }

        .cs-send-btn {
            background: var(--primary-color);
            color: white;
            border: none;
            border-radius: 4px;
            width: 32px;
            cursor: pointer;
        }

        /* åŠ¨ç”»æ•ˆæœ */
        @keyframes pulse {
            0% { opacity: 0.5; }
            50% { opacity: 1; }
            100% { opacity: 0.5; }
        }

        .typing-indicator {
            display: inline-block;
            width: 4px;
            height: 4px;
            background: #333;
            border-radius: 50%;
            margin: 0 2px;
            animation: pulse 1s infinite;
        }
        
        .typing-indicator:nth-child(2) { animation-delay: 0.2s; }
        .typing-indicator:nth-child(3) { animation-delay: 0.4s; }

    </style>
</head>
<body>

    <!-- å·¦ä¾§å¯¼èˆª -->
    <div class="sidebar">
        <div class="logo">
            <i class="fa-solid fa-bolt"></i> å¿«ä¼ å· Agent
        </div>
        <div class="nav-item active">
            <i class="fa-solid fa-house"></i> å·¥ä½œå°
        </div>
        <div class="nav-item">
            <i class="fa-solid fa-pen-nib"></i> å†…å®¹ç®¡ç†
        </div>
        <div class="nav-item">
            <i class="fa-solid fa-chart-line"></i> æ•°æ®åˆ†æ
        </div>
        <div class="nav-item">
            <i class="fa-solid fa-wallet"></i> æ”¶ç›Šä¸­å¿ƒ
        </div>
        <div class="nav-item" style="margin-top: auto;">
            <i class="fa-solid fa-gear"></i> è®¾ç½®
        </div>
    </div>

    <!-- ä¸»å·¥ä½œåŒº -->
    <div class="main-container">
        
        <!-- å·¦åˆ—ï¼šæ¯æ—¥æ’­æŠ¥ Agent -->
        <div class="daily-report-section">
            <div class="card" style="height: 100%;">
                <div class="card-header">
                    <div class="card-title">
                        <i class="fa-solid fa-bullhorn" style="color: var(--primary-color);"></i> æ¯æ—¥æ’­æŠ¥
                        <span class="agent-badge">AI</span>
                    </div>
                    <i class="fa-solid fa-ellipsis text-sub" style="cursor: pointer; color: #ccc;"></i>
                </div>
                
                <div style="margin-bottom: 16px;">
                    <p style="font-size: 14px; font-weight: 500;">ğŸ‘‹ æ—©ä¸Šå¥½ï¼Œåˆ›ä½œè€…ï¼</p>
                    <p style="font-size: 12px; color: var(--text-sub);">è¿™æ˜¯æ‚¨çš„æ˜¨æ—¥æ•°æ®æ€»ç»“</p>
                </div>

                <div class="data-summary">
                    <div class="data-item">
                        <div class="data-label">æµè§ˆé‡</div>
                        <div class="data-num">12,450</div>
                        <div class="trend up"><i class="fa-solid fa-arrow-up"></i> 12%</div>
                    </div>
                    <div class="data-item">
                        <div class="data-label">ç²‰ä¸å¢é•¿</div>
                        <div class="data-num">+86</div>
                        <div class="trend up"><i class="fa-solid fa-arrow-up"></i> 5%</div>
                    </div>
                    <div class="data-item">
                        <div class="data-label">äº’åŠ¨é‡</div>
                        <div class="data-num">320</div>
                        <div class="trend down"><i class="fa-solid fa-arrow-down"></i> 2%</div>
                    </div>
                    <div class="data-item">
                        <div class="data-label">é¢„ä¼°æ”¶ç›Š</div>
                        <div class="data-num">Â¥ 128.5</div>
                        <div class="trend up"><i class="fa-solid fa-arrow-up"></i> 8%</div>
                    </div>
                </div>

                <div style="margin-top: 10px;">
                    <p style="font-size: 13px; font-weight: 600; margin-bottom: 10px;">ä»Šæ—¥è¡ŒåŠ¨å»ºè®®</p>
                    <ul class="suggestion-list">
                        <li class="suggestion-item" onclick="fillCreationTopic('AIæŠ€æœ¯åœ¨å†…å®¹è¡Œä¸šçš„åº”ç”¨')">
                            <span class="suggestion-tag">ğŸ”¥ çƒ­ç‚¹è¿½å‡»</span>
                            å»ºè®®åˆ›ä½œâ€œAIæŠ€æœ¯å˜é©â€ç›¸å…³å†…å®¹ï¼Œå½“å‰çƒ­åº¦æé«˜ã€‚
                        </li>
                        <li class="suggestion-item">
                            <span class="suggestion-tag">ğŸ† æ´»åŠ¨æŒ‘æˆ˜</span>
                            å‚ä¸â€œå¤æ—¥VlogæŒ‘æˆ˜èµ›â€ï¼Œç“œåˆ†ç™¾ä¸‡æµé‡æ‰¶æŒã€‚
                        </li>
                        <li class="suggestion-item">
                            <span class="suggestion-tag">ğŸ“š å­¦é™¢æ¨è</span>
                            å­¦ä¹ ã€Šå¦‚ä½•æå‡å®Œæ’­ç‡ã€‹ï¼Œä¼˜åŒ–è§†é¢‘ç»“æ„ã€‚
                        </li>
                    </ul>
                </div>
            </div>
        </div>

        <!-- ä¸­åˆ—ï¼šå†…å®¹åˆ›ä½œ Agent (æ ¸å¿ƒ) -->
        <div class="creation-agent-section card">
            <div class="card-header">
                <div class="card-title">
                    <i class="fa-solid fa-wand-magic-sparkles" style="color: var(--primary-color);"></i> åˆ›ä½œåŠ©æ‰‹
                    <span class="agent-badge">Core Agent</span>
                </div>
                <div style="font-size: 12px; color: var(--text-sub);">AI è¾…åŠ©åˆ›ä½œä¸­...</div>
            </div>

            <div class="creation-tabs">
                <button class="tab-btn active" onclick="switchTab('article')"><i class="fa-regular fa-file-lines"></i> å›¾æ–‡åˆ›ä½œ</button>
                <button class="tab-btn" onclick="switchTab('video')"><i class="fa-solid fa-video"></i> è§†é¢‘ç”Ÿæˆ</button>
            </div>

            <!-- èŠå¤©/äº¤äº’åŒºåŸŸ -->
            <div class="chat-interface" id="creationChatBox">
                <div class="message ai">
                    <div class="avatar"><i class="fa-solid fa-robot"></i></div>
                    <div class="bubble">
                        æˆ‘æ˜¯æ‚¨çš„å†…å®¹åˆ›ä½œ Agentã€‚æ‚¨å¯ä»¥ï¼š<br>
                        1. ä¸Šä¼ æ–‡æ¡£è‡ªåŠ¨æ¶¦è‰²æ’ç‰ˆ<br>
                        2. è¾“å…¥é€‰é¢˜ç”Ÿæˆå¤§çº²<br>
                        3. æä¾›æ–¹å‘è‡ªåŠ¨æ’°å†™åˆç¨¿<br>
                        è¯·å‘Šè¯‰æˆ‘æ‚¨æƒ³å†™ä»€ä¹ˆï¼Ÿ
                    </div>
                </div>
            </div>

            <!-- è¾“å…¥åŒºåŸŸ -->
            <div class="input-area">
                <div class="input-options">
                    <div class="option-chip"><i class="fa-solid fa-upload"></i> ä¸Šä¼ ç´ æ</div>
                    <div class="option-chip"><i class="fa-solid fa-list"></i> ç”Ÿæˆå¤§çº²</div>
                    <div class="option-chip"><i class="fa-solid fa-image"></i> åŒ¹é…é…å›¾</div>
                </div>
                <textarea id="creationInput" placeholder="è¾“å…¥é€‰é¢˜ã€å¤§çº²æˆ–åˆ›ä½œæ–¹å‘...ï¼ˆä¾‹å¦‚ï¼šå†™ä¸€ç¯‡å…³äºæ­å·æ—…æ¸¸çš„æ”»ç•¥ï¼‰"></textarea>
                <button class="send-btn" onclick="handleCreationSend()">
                    ç”Ÿæˆå†…å®¹ <i class="fa-solid fa-paper-plane"></i>
                </button>
            </div>
        </div>

        <!-- å³åˆ—ï¼šè®¤è¯ & å®¢æœ -->
        <div class="right-column">
            
            <!-- è®¤è¯ Agent -->
            <div class="card auth-card">
                <div class="card-header">
                    <div class="card-title">
                        <i class="fa-solid fa-id-card" style="color: var(--primary-color);"></i> è®¤è¯åŠ©æ‰‹
                    </div>
                </div>
                <div class="auth-status" id="authStatusArea">
                    <div class="status-icon">
                        <i class="fa-solid fa-user-shield"></i>
                    </div>
                    <div class="status-text">
                        <h4>æœªå®åè®¤è¯</h4>
                        <p>è®¤è¯åå¯è§£é”æ”¶ç›Šæç°åŠŸèƒ½</p>
                    </div>
                </div>
                <button class="auth-btn" id="authBtn" onclick="startAuth()">å¼€å§‹è®¤è¯æŒ‡å¼•</button>
            </div>

            <!-- å®¢æœ Agent -->
            <div class="card cs-card">
                <div class="card-header">
                    <div class="card-title">
                        <i class="fa-solid fa-headset" style="color: var(--primary-color);"></i> å®¢æœåŠ©æ‰‹
                    </div>
                </div>
                <div class="cs-chat-window" id="csChatBox">
                    <div class="message ai">
                        <div class="bubble" style="padding: 8px 12px; font-size: 12px;">
                            æ‚¨å¥½ï¼Œæˆ‘æ˜¯æ™ºèƒ½å®¢æœã€‚é‡åˆ°ä»»ä½•å¹³å°ä½¿ç”¨é—®é¢˜éƒ½å¯ä»¥é—®æˆ‘ï¼Œä¾‹å¦‚â€œå¦‚ä½•æç°â€æˆ–â€œæ¨èæœºåˆ¶â€ã€‚
                        </div>
                    </div>
                </div>
                <div class="cs-input-row">
                    <input type="text" class="cs-input" id="csInput" placeholder="é‡åˆ°ä»€ä¹ˆé—®é¢˜ï¼Ÿ" onkeypress="handleCsEnter(event)">
                    <button class="cs-send-btn" onclick="handleCsSend()"><i class="fa-solid fa-arrow-up"></i></button>
                </div>
            </div>

        </div>
    </div>

    <script>
        // --- åˆ›ä½œ Agent é€»è¾‘ ---
        function switchTab(type) {
            document.querySelectorAll('.tab-btn').forEach(btn => btn.classList.remove('active'));
            event.target.classList.add('active');
            
            const chatBox = document.getElementById('creationChatBox');
            const msg = type === 'article' 
                ? "å·²åˆ‡æ¢è‡³å›¾æ–‡æ¨¡å¼ã€‚è¯·è¾“å…¥é€‰é¢˜æˆ–ä¸Šä¼ æ–‡æ¡£ã€‚" 
                : "å·²åˆ‡æ¢è‡³è§†é¢‘æ¨¡å¼ã€‚æ‚¨å¯ä»¥ä¸Šä¼ ç´ æè¿›è¡Œå‰ªè¾‘ï¼Œæˆ–è¾“å…¥è„šæœ¬ç”Ÿæˆæ•°å­—äººè§†é¢‘ã€‚";
            
            appendMessage('ai', msg, chatBox);
        }

        function handleCreationSend() {
            const input = document.getElementById('creationInput');
            const text = input.value.trim();
            if (!text) return;

            const chatBox = document.getElementById('creationChatBox');
            
            // 1. ç”¨æˆ·æ¶ˆæ¯
            appendMessage('user', text, chatBox);
            input.value = '';

            // 2. æ¨¡æ‹Ÿ AI æ€è€ƒ
            const loadingId = appendLoading(chatBox);

            // 3. æ¨¡æ‹Ÿ AI å›å¤ (å»¶è¿Ÿ 1.5ç§’)
            setTimeout(() => {
                removeLoading(loadingId);
                const response = `å·²æ”¶åˆ°æ‚¨çš„é€‰é¢˜ï¼š<strong>â€œ${text}â€</strong>ã€‚<br><br>æ­£åœ¨ä¸ºæ‚¨ç”Ÿæˆåˆç¨¿å¤§çº²ï¼š<br>1. å¼•è¨€ï¼šèƒŒæ™¯ä»‹ç»ä¸çƒ­ç‚¹å…³è”<br>2. æ ¸å¿ƒè§‚ç‚¹é˜è¿°<br>3. æ¡ˆä¾‹åˆ†æ<br>4. æ€»ç»“ä¸äº’åŠ¨å¼•å¯¼<br><br>æ˜¯å¦éœ€è¦åŸºäºæ­¤å¤§çº²ç”Ÿæˆå®Œæ•´æ–‡ç« ï¼Ÿ`;
                appendMessage('ai', response, chatBox);
                // æ»šåŠ¨åˆ°åº•éƒ¨
                chatBox.scrollTop = chatBox.scrollHeight;
            }, 1500);
        }

        function fillCreationTopic(topic) {
            document.getElementById('creationInput').value = topic;
            // é«˜äº®è¾“å…¥æ¡†æç¤ºç”¨æˆ·
            document.getElementById('creationInput').focus();
        }

        // --- å®¢æœ Agent é€»è¾‘ ---
        function handleCsEnter(e) {
            if (e.key === 'Enter') handleCsSend();
        }

        function handleCsSend() {
            const input = document.getElementById('csInput');
            const text = input.value.trim();
            if (!text) return;

            const chatBox = document.getElementById('csChatBox');
            
            // ç”¨æˆ·æ¶ˆæ¯
            const userMsg = document.createElement('div');
            userMsg.className = 'message user';
            userMsg.innerHTML = `<div class="bubble" style="padding: 8px 12px; font-size: 12px;">${text}</div>`;
            chatBox.appendChild(userMsg);
            input.value = '';

            // æ¨¡æ‹Ÿå›å¤
            setTimeout(() => {
                const aiMsg = document.createElement('div');
                aiMsg.className = 'message ai';
                aiMsg.innerHTML = `<div class="bubble" style="padding: 8px 12px; font-size: 12px;">å…³äºâ€œ${text}â€ï¼Œæ‚¨å¯ä»¥æŸ¥çœ‹å¸®åŠ©ä¸­å¿ƒæ–‡æ¡£ï¼š<a href="#" style="color:var(--primary-color)">ç‚¹å‡»æŸ¥çœ‹è¯¦æƒ…</a>ã€‚æˆ–è€…è½¬æ¥äººå·¥å®¢æœã€‚</div>`;
                chatBox.appendChild(aiMsg);
                chatBox.scrollTop = chatBox.scrollHeight;
            }, 1000);
        }

        // --- è®¤è¯ Agent é€»è¾‘ ---
        function startAuth() {
            const btn = document.getElementById('authBtn');
            const statusArea = document.getElementById('authStatusArea');
            
            btn.innerText = "èµ„æ–™å®¡æ ¸ä¸­...";
            btn.disabled = true;
            btn.style.background = "#F2F3F5";
            btn.style.color = "#999";
            btn.style.border = "none";

            statusArea.innerHTML = `
                <div class="status-icon" style="background: #E8FFEA; color: #00A870;">
                    <i class="fa-solid fa-spinner fa-spin"></i>
                </div>
                <div class="status-text">
                    <h4>æ­£åœ¨æ ¡éªŒèµ„æ–™</h4>
                    <p>Agent æ­£åœ¨OCRè¯†åˆ«æ‚¨çš„è¯ä»¶...</p>
                </div>
            `;

            // æ¨¡æ‹Ÿå®Œæˆ
            setTimeout(() => {
                statusArea.innerHTML = `
                    <div class="status-icon" style="background: #E8FFEA; color: #00A870;">
                        <i class="fa-solid fa-check"></i>
                    </div>
                    <div class="status-text">
                        <h4>èµ„æ–™å·²æäº¤</h4>
                        <p>é¢„è®¡ 2 å°æ—¶å†…å®Œæˆå®¡æ ¸</p>
                    </div>
                `;
                btn.innerText = "æŸ¥çœ‹è¿›åº¦";
            }, 2000);
        }

        // --- é€šç”¨å·¥å…· ---
        function appendMessage(role, html, container) {
            const msgDiv = document.createElement('div');
            msgDiv.className = `message ${role}`;
            const avatarIcon = role === 'ai' ? '<i class="fa-solid fa-robot"></i>' : '<i class="fa-solid fa-user"></i>';
            msgDiv.innerHTML = `
                <div class="avatar">${avatarIcon}</div>
                <div class="bubble">${html}</div>
            `;
            container.appendChild(msgDiv);
            container.scrollTop = container.scrollHeight;
        }

        function appendLoading(container) {
            const id = 'loading-' + Date.now();
            const msgDiv = document.createElement('div');
            msgDiv.className = `message ai`;
            msgDiv.id = id;
            msgDiv.innerHTML = `
                <div class="avatar"><i class="fa-solid fa-robot"></i></div>
                <div class="bubble">
                    <span class="typing-indicator"></span>
                    <span class="typing-indicator"></span>
                    <span class="typing-indicator"></span>
                </div>
            `;
            container.appendChild(msgDiv);
            container.scrollTop = container.scrollHeight;
            return id;
        }

        function removeLoading(id) {
            const el = document.getElementById(id);
            if (el) el.remove();
        }
    </script>
</body>
</html>
